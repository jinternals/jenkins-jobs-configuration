- job-template:
    id: "pr-job-template"
    display-name: "{display-name}"
    description: "${description}"
    name: "{name}-pipeline"
    project-type: pipeline
    folder: "{folder}"
    dsl:
      !include-raw:
      - ../dsl/git-pull-request-pipeline-dsl.groovy
    parameters:
      - string:
          name: action
    scm:
      - git:
         credentials-id: "github"
         url: "{gitRepository}"
         branches:
          - "origin/{gitBranch}"
    triggers:
      - generic-webhook-trigger:
            post-content-params:
                - type: JSONPath
                  key: action
                  value: $.action
            regex-filter-text: $action
            regex-filter-expression: ^(opened|reopened|synchronize)$
            print-post-content: true
            print-contrib-var: true
            cause: Generic Cause
            silent-response: false
